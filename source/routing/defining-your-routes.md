Когда приложение запускается, роутер сопоставляет текущий URL с *маршрутами*, которые вы определили. Маршруты, в свою очередь, отвечают за отображение шаблонов, загрузку данных и установку состояния приложения.

## Основные маршруты

Чтобы определить соответствия URL, нужно вызвать метод [map](http://emberjs.com/api/classes/Ember.Router.html#method_map) в роутере приложения. При вызове `map` следует передать функцию. Она будет вызвана со значением `this`, которое присвоено объекту. Этот объект можно использовать для создания маршрутов.

`app/router.js`
```js
Router.map(function() {
  this.route('about', { path: '/about' });
  this.route('favorites', { path: '/favs' });
});
```

Теперь, когда пользователь перейдет в `/about`, Ember.js отобразит шаблон `about`. Посещение `/favs` отобразит шаблон `favorites`.

Вы можете убрать путь, если он имеет то же имя, что и маршрут. В таком случае предыдущий пример будет выглядеть так:

`app/router.js`
```js
Router.map(function() {
  this.route('about');
  this.route('favorites', { path: '/favs' });
});
```

Внутри шаблонов можно использовать `{{link-to}}`, чтобы перемещаться между маршрутами. Для этого нужно использовать имя, которое вы предоставили для метода `route` (или в случае с /, имя index).

```hbs
{{#link-to "index"}}<img class="logo">{{/link-to}}

<nav>
  {{#link-to "about"}}About{{/link-to}}
  {{#link-to "favorites"}}Favorites{{/link-to}}
</nav>
```

Помощник `{{link-to}}` также добавит класс `active` к ссылке, которая указывает на текущий активный маршрут.

## Вложенные маршруты

Зачастую вам будут нужны шаблоны, которые отображаются внутри других шаблонов. Например, в приложения для блога, вместо перехода из списка постов к созданию нового поста, вы могли бы отобразить страницу создания поста рядом со списком.

В таких случаях вы можете использовать вложенные маршруты, чтобы показать один шаблон внутри другого.

Определить вложенные шаблоны можно с помощью передачи `this.route` обратного вызова:

`app/router.js`
```js
Router.map(function() {
  this.route('posts', function() {
    this.route('new');
  });
});
```

Затем нужно добавить помощника `{{outlet}}` в шаблон, чтобы указать, где вы хотите отобразить вложенный шаблон:

`templates/posts.hbs`
```hbs
<h1>Posts</h1>
<!-- Display posts and other content -->
{{outlet}}
```

Этот роутер создает маршрут для `/posts` и `/posts/new`. Когда пользователь посещает `/posts`, он будет просто видеть шаблон `posts.hbs` (Ниже в маршрутах index есть важное дополнение к этому). Когда пользователь посещает `/posts/new`, он будет видеть шаблон `posts/new.hbs`, отображенный в `{{outlet}}` шаблона `posts`.

Имена вложенных маршрутов включают имена своих предков. Если вы хотите перейти к маршруту (через `transitionTo` или `{{#link-to}}`), обязательно используйте полное имя маршрута (`posts.new`, а не `new`).

## Маршрут приложения

Маршрут `application` вводится, когда приложение загружается в первый раз. Как и любой другой маршрут, по умолчанию он будет загружать шаблон `application`. Вам следует вкладывать сюда заголовок, нижнюю часть страницы и любой другой декоративный контент. Все другие маршруты отобразят их шаблоны в `{{outlet}}` шаблона `application.hbs`.

Этот маршрут — часть любого приложения. Поэтому вам не нужно указывать его в `app/router.js`.

## Маршруты INDEX

На каждом уровне вложения (включая верхний) Ember.js автоматически предоставляет маршрут под именем `index` для пути `/`.

Например, если вы пишете простой роутер таким образом:

`app/router.js`
```js
Router.map(function(){
  this.route('favorites');
});
```

Его эквивалентом будет:

`app/router.js`
```js
Router.map(function(){
  this.route('index', { path: '/' });
  this.route('favorites');
});
```

Шаблон `index` отобразится в `{{outlet}}` шаблона `application`. Если пользователь переходит в `/favorites`, Ember.js заменит шаблон `index` на шаблон `favorites`.

Вложенный роутер вроде этого:

`app/router.js`
```js
Router.map(function() {
  this.route('posts', function() {
    this.route('favorites');
  });
});
```

Служит эквивалентом:

`app/router.js`
```js
Router.map(function(){
  this.route('index', { path: '/' });
  this.route('posts', function() {
    this.route('index', { path: '/' });
    this.route('favorites');
  });
});
```

Если пользователь переходит в `/posts`, текущим маршрутом будет `posts.index`, и шаблон `posts/index` отобразится в `{{outlet}}` шаблона `posts`.

Если пользователь затем перейдет в `/posts/favorites`, Ember.js заменит `{{outlet}}`` в шаблоне posts` на шаблон `posts/favorites`.

## Динамические сегменты

Одно из назначений маршрута — загрузка модели.

Например, если у нас есть маршрут `this.route('posts');`, наш маршрут должен загрузить все посты блога для приложения.

Так как `/posts` представляет фиксированную модель, нам не нужна какая-либо дополнительная информация, чтобы знать, какие данные извлекать. Но если вы хотите, чтобы маршрут представлял единичный пост, вряд ли вам захочется строго кодировать каждый возможный пост в роутере.

Вводите *динамические сегменты*.

Динамический сегмент — это часть URL, которая начинается с `:` и следует за идентификатором.

`app/router.js`
```js
Router.map(function() {
  this.route('posts');
  this.route('post', { path: '/post/:post_id' });
});
```

Если пользователь переходит к `/post/5`, маршрут будет иметь идентификатор `post_id` с цифрой `5`, который он использует, чтобы загрузить нужный пост. Смотрите [Указание модели маршрута](http://guides.emberjs.com/v2.1.0/routing/specifying-a-routes-model/), чтобы узнать больше о загрузке модели.

## Обобщенные/подстановочные маршруты

Вы можете определить подстановочные маршруты, которые будут соответствовать множеству сегментов URL. Это можно использовать, если вам, например, нужен универсальный маршрут. Он будет полезен, если пользователь введет неправильный URL, который приложение не поддерживает.

`app/router.js`
```js
Router.map(function() {
  this.route('page-not-found', { path: '/*wildcard' });
});
```

## Перенастройка пространства имен вложенного маршрута

Когда маршруты вложенные, для дочернего маршрута может быть полезнее не наследовать имя предка. Это позволяет ссылаться и повторно использовать заданный маршрут в сложных деревьях маршрута и поддерживать короткое имя класса.

Вы можете перенастроить текущее «пространство имен» с помощью удачно названной опции `resetNamespace: true`.

`app/router.js`
```js
Router.map(function() {
  this.route('post', { path: '/post/:post_id' }, function() {
    this.route('edit');
    this.route('comments', { resetNamespace: true }, function() {
      this.route('new');
    });
  });
});
```

Как и раньше, шаблон `comments` отобразится в `{{outlet}}` шаблона `post`. Все шаблоны под `comments` (`comments/index` и `comments/new`) будут отображаться в outlet `comments`.

Но путь `/post/:id/comments` загрузит шаблон `comments.hbs`, а не шаблон `post/comments.hbs`.

## Обработчики маршрута

Чтобы маршрут выполнял что-то помимо отображения шаблона с тем же именем, вам нужно будет создать обработчик маршрута. В дальнейшем в руководстве мы рассмотрим возможности обработчиков маршрута. Чтобы получить больше информации о маршрутах, смотрите документацию API по [роутеру](http://emberjs.com/api/classes/Ember.Router.html) и [обработчикам маршрута](http://emberjs.com/api/classes/Ember.Route.html).